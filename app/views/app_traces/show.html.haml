- content_for :page_header_title, "App trace nÂ°#{@app_trace.id}"
- if @app_trace.imported
  - content_for :page_header_text, "#{@app_trace.app.capitalize} on #{@app_trace.os.capitalize} over #{@app_trace.connectivity.capitalize}"
- content_for :left_menu, render('left_menu')

- content_for :main_header do 
  %nav
    .nav-wrapper
      .col.s12
        = link_to 'Browse traces', app_traces_path, class: 'breadcrumb'
        = link_to "App trace #{@app_trace.id}", app_trace_path(@app_trace), class: 'breadcrumb'

.section.about
  %h5 About trace
  %p
    .row
      - [:id, :app, :cmd, :connectivity, :description, :events_count, :imported, :kernel, :machine, :os, :stats_computed, :version, :workload, :created_at, :updated_at].each do |attr|
        = show_property(attr.to_s.humanize, @app_trace.send(attr))

      = show_property("Sockets opened", @app_trace.socket_traces.count)
      = show_property("Download", link_to("#{@app_trace.archive.file.filename}", @app_trace.archive.url))

.section.sockets
  %h5 Sockets
  %p
    #{@app_trace.socket_traces_count} sockets opened:
  %table
    %thead
      %th Socket index
      %th Socket type
      %th Events count
    - @app_trace.socket_traces.each_with_index do |socket_trace, index|
      %tr
        %td= index
        %td= socket_trace.socket_type
        %td= socket_trace.events_count
        %td= link_to('Show', socket_trace_path(socket_trace)) 

.section.nature_of_sockets
  %h5 Nature of sockets
  - if @app_trace.stats_computed
    - AppTraceStat::STATS.each do |stat|
      = render 'shared/stat', stat: stat, trace: @app_trace
